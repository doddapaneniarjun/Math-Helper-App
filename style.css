:root{
  --bg: #f1f8ff;
  --bg2:#e3f2fd;
  --card:#ffffff;
  --ink:#0b2545;
  --ink-soft:#385170;
  --primary:#2e7dff;
  --primary-dark:#1a5ed8;
  --accent:#ffd166;
  --accent-ink:#6b4a00;
  --success:#2ecc71;
  --error:#ff5a5f;
  --shadow: 0 10px 22px rgba(31,61,120,.18);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin:0;
  padding: 24px;
  color: var(--ink);
  background: radial-gradient(1200px 600px at 10% -10%, #e8f0ff 10%, transparent 40%), 
              radial-gradient(800px 500px at 110% 10%, #e0fbff 20%, transparent 60%),
              linear-gradient(180deg, var(--bg), var(--bg2));
}

/* Top Tabs */
.tabs{
  display:flex; flex-wrap:wrap; gap:12px; align-items:center; margin-bottom: 22px;
}
.tab-btn{
  appearance:none; border:none; cursor:pointer;
  background: var(--primary);
  color:#fff; font-weight:800;
  padding: 14px 18px; border-radius: 16px;
  box-shadow: var(--shadow);
  letter-spacing:.3px;
  transition: transform .15s ease, background .2s ease, box-shadow .2s ease;
}
.tab-btn:hover{ background: var(--primary-dark); transform: translateY(-1px)}
.tab-btn:active{ transform: translateY(0) scale(.98) }

/* Clear progress sits like a chip button */
.tabs .clear-btn{
  background: var(--accent); color: var(--accent-ink);
}
.tabs .clear-btn:hover{ filter: brightness(.95) }

/* Section headings */
#topics-tab h2, #books-tab h2{
  margin: 8px 0 12px; font-size: 28px;
  color: var(--ink); letter-spacing:.5px;
}

/* Layouts */
.tab-content{ display:none }
.tab-content.active{ display:block }

/* Topics grid with plenty of space */
#topics-list{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 24px;
}
.topic-card{
  background: var(--card);
  border-radius: 18px;
  padding: 18px;
  box-shadow: var(--shadow);
  border: 3px solid rgba(46,125,255,.08);
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.topic-card:hover{ transform: translateY(-3px); box-shadow: 0 14px 28px rgba(31,61,120,.22); border-color: rgba(46,125,255,.16); }
.topic-card h3{
  margin: 0 0 10px; cursor: pointer;
  color: var(--primary); font-weight:900; font-size: 18px;
}

/* Inside topic */
.topic-content{ margin-top: 6px; padding-top: 10px; border-top: 2px dashed #d6e2ff; }
.topic-content p{ margin: 0 0 10px; color: var(--ink-soft) }
ul{ margin: 10px 0; padding-left: 20px }

/* Practice items with inline answer + enter */
li.practice-item{
  list-style:none;
  display:grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items:center;
  background: #f7fbff;
  border: 2px solid #d7e6ff;
  border-radius: 14px;
  padding: 10px 12px; margin-bottom: 10px;
  transition: transform .1s ease, background .2s ease, border-color .2s ease;
}
li.practice-item:hover{ background: #eef6ff; border-color: #c7dcff }

.inline-answer{
  width: 160px; max-width: 45vw;
  padding: 10px 12px;
  border-radius: 12px; border: 2px solid #cde0ff; outline:none;
  font-size: 16px;
  transition: box-shadow .2s ease, border-color .2s ease;
  background: #fff;
}
.inline-answer:focus{ border-color: var(--primary); box-shadow: 0 0 0 4px rgba(46,125,255,.15) }

.inline-enter{
  padding: 10px 14px; border-radius: 12px; border:none; cursor:pointer;
  background: var(--primary); color:#fff; font-weight:800; box-shadow: var(--shadow);
  transition: transform .12s ease, background .2s ease;
}
.inline-enter:hover{ background: var(--primary-dark); transform: translateY(-1px) }
.inline-enter:disabled{ opacity:.5; cursor:not-allowed }

.inline-feedback{
  grid-column: 1 / -1; font-weight:800; padding-left:4px; min-height: 18px;
}
.inline-feedback.ok{ color: var(--success) }
.inline-feedback.bad{ color: var(--error) }

/* Books list & Lessons list */
#books-list{ display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 14px; }
#books-list button, #lessons-list button{
  display:block; width:100%; text-align:left; padding: 14px 16px; border-radius:16px; border:none; cursor:pointer;
  background: linear-gradient(180deg, #ffffff, #f4f8ff);
  color: var(--ink); font-weight:800; box-shadow: var(--shadow);
  border: 2px solid #dfeaff;
}
#books-list button:hover, #lessons-list button:hover{ transform: translateY(-2px); border-color: #c9dcff }

/* Lesson content panel */
#book-content, #lesson-content{
  background: var(--card); border-radius: 18px; padding: 16px; margin-top: 14px; box-shadow: var(--shadow);
  border: 2px solid #dfeaff;
}
#book-title, #lesson-title{ color: var(--primary); margin: 0 0 8px }
#lesson-summary{ color: var(--ink-soft) }

/* Modal */
#problem-modal{
  display:none; position: fixed; inset:0; z-index: 1000;
  background: rgba(3,12,27,.65);
  justify-content:center; align-items:center; padding: 20px;
}
#problem-modal.active{ display:flex }
#problem-modal .modal-content{
  background: var(--card); border-radius: 20px; width: min(760px, 96%);
  padding: 28px 22px 22px; position: relative; box-shadow: 0 24px 48px rgba(7,18,38,.35);
  border: 3px solid #dfeaff;
  text-align:center;
}
#close-btn{
  position: absolute; top: -14px; right: -14px;
  width: 40px; height: 40px; border-radius: 50%; border:none; cursor:pointer;
  background: var(--error); color: #fff; font-weight:900; font-size: 20px;
  display:flex; align-items:center; justify-content:center; line-height:1;
  box-shadow: 0 10px 18px rgba(0,0,0,.25);
}
.problem-text{ font-size: 22px; font-weight:900; color: var(--ink); }
input.answer-input{
  width: 70%; max-width: 460px; padding: 12px 14px; border-radius: 14px; border: 2px solid #cde0ff;
  margin-top: 14px; font-size: 18px;
}
.feedback{ margin-top: 10px; font-weight:900; min-height: 22px }
.modal-actions{ margin-top: 14px; display:flex; justify-content:center; gap: 10px }

.next-problem{
  padding: 12px 16px; border-radius: 14px; border:none; cursor:pointer;
  background: var(--primary); color:#fff; font-weight:900; box-shadow: var(--shadow);
}
.next-problem:hover{ background: var(--primary-dark) }

/* Celebrations */
.confetti{
  position:absolute; left:0; top:0; width:100%; height:100%; overflow:hidden; pointer-events:none;
}
.confetti i{
  position:absolute; width:10px; height:10px; border-radius:2px; opacity:.9;
  animation: fall 900ms linear forwards;
}
@keyframes fall{
  0%{ transform: translateY(-20px) rotate(0deg) }
  100%{ transform: translateY(420px) rotate(480deg); opacity:.1 }
}

/* Responsive tweaks */
@media (max-width:540px){
  .inline-answer{ width: 120px }
  .tab-btn{ width: 100% }
}
